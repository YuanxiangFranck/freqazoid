"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function e(t,n,i){function o(a,u){if(!n[a]){if(!t[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(r)return r(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return o(n?n:e)},c,c.exports,e,t,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){(function(t){var n=e("./mymodule"),i=n.myvariable,o=n.myfunction;console.log("This is a variable:",i),console.log("This is a function result:",o(3,5));var r=void 0,a=void 0,u=function(){function e(){_classCallCheck(this,e),s();var t=l();return t?(this.graphGenerated=!1,this.getRequirements(),void(this.analyserSize=8192)):void alert("Some of the requirements are not satisfied by your browser or computer.")}return _createClass(e,[{key:"getRequirements",value:function(){var e=this;r=new window.AudioContext,navigator.getUserMedia({audio:!0,video:!1},function(t){e.micInput=r.createMediaStreamSource(t),e.afterGettingRequirements()},function(e){console.log("ERROR",e)})}},{key:"afterGettingRequirements",value:function(){this.generateAudioGraph(),this.graphGenerated=!0,this.isMuted=!0}},{key:"generateAudioGraph",value:function(){this.analyser=r.createAnalyser(),this.analyser.smoothingTimeConstant=0,this.analyser.fftSize=this.analyserSize,this.out=r.createGain(),this.out.gain.value=0,this.micInput.connect(this.analyser),this.analyser.connect(this.out),this.out.connect(r.destination)}},{key:"getOscilloscopeBufferLength",value:function(){return this.analyser.frequencyBinCount}},{key:"getOscilloscopeData",value:function(e){this.analyser.getByteTimeDomainData(e)}},{key:"turnSoundOn",value:function(){this.out.gain.value=1,this.isMuted=!1}},{key:"turnSoundOff",value:function(){this.out.gain.value=0,this.isMuted=!0}},{key:"toggleSoundOutput",value:function(){this.isMuted?this.out.gain.value=1:this.out.gain.value=0,this.isMuted=!this.isMuted}}]),e}(),s=function(){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,window.AudioContext=window.AudioContext||window.webkitAudioContext},l=function(){var e={"microphone input":Boolean(navigator.getUserMedia),"audio context":Boolean(window.AudioContext)},t=!0;for(var n in e)console.log(n,e[n]),e[n]||(console.log("functionality "+n+" not supported on your device/browser"),t=!1);return t},c=function(){a=new u;var e=document.getElementById("oscContainer"),t=document.getElementById("chkSoundOutput");t.addEventListener("change",function(e){e.srcElement.checked?a.turnSoundOn():a.turnSoundOff()});var n=document.getElementById("oscilloscope"),i=n.getContext("2d");n.width=e.clientWidth,n.height=e.clientHeight;var o=a.analyserSize,r=2048,s=new Uint8Array(o),l=function(e){for(var t=0;t<o;t++){var n=e[t],i=e[t+1];if(i>128&&n<=128)break}return t===o&&(t=0),t},c=function t(){if(requestAnimationFrame(t),a.graphGenerated){a.getOscilloscopeData(s);var n=document.getElementById("chkTrigger").checked,o=n?l(s):0;document.getElementById("delta").innerText=o;var u=e.clientWidth,c=e.clientHeight;i.fillStyle="rgb(200, 200, 200)",i.fillRect(0,0,u,c),i.lineWidth=1,i.strokeStyle="rgb(0.1, 0.1, 0.5)",i.beginPath(),i.moveTo(0,c/2),i.lineTo(u,c/2),i.stroke(),i.lineWidth=2,i.strokeStyle="rgb(0, 0, 0)",i.beginPath();for(var d=1*u/r,f=0,h=o;h<r+o;h++){var g=s[h]/256,v=c-g*c;h===o?i.moveTo(f,v):i.lineTo(f,v),f+=d}i.stroke()}};c()};c(),window.addEventListener("resize",function(){var e=["oscilloscope"],t=!0,n=!1,i=void 0;try{for(var o,r=e[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value,u=document.getElementById(a);u.width=u.parentNode.clientWidth,u.height=u.parentNode.clientHeight}}catch(e){n=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}},!1),t.ac=r,t.frq=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./mymodule":2}],2:[function(e,t,n){var i="a_string",o=function(e,t){return e+t};t.exports.myvariable=i,t.exports.myfunction=o},{}]},{},[1]);
